- @user = env['warden'].user || NullUser.new

%nav{ class: 'navbar navbar-default navbar-fixed-top', role: 'navigation' }
  .container-fluid
    .navbar-header
      %button{ type: 'button', class: 'navbar-toggle', 'data-toggle' => 'collapse', 'data-target' => '#navbar-collapse' }
        %span.sr-only
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar
      %a{ class: 'navbar-brand', href: '/' } myAudi

    %div{ class: 'collapse navbar-collapse', id: 'navbar-collapse' }
      %ul{ class: 'nav navbar-nav' }

        - if @user.trent?
          %li
            %a{ href: '/cars/rs4' } My RS4

        - elsif @user.admin?
          %li
            %a{ href: '/dashboards' } Dashboard
          %li
            %a{ href: '/cms' } CMS

        - else
          %li
            %a{ href: '/articles' } Articles
        %li.dropdown
          %a{ href: '#', class: 'dropdown-toggle', 'data-toggle' => 'dropdown' } Book<span class='caret'></span>
          %ul{ class: 'dropdown-menu', role: 'menu' }
            %li
              %a{ href: '/book/test-drive' } Test drive
            %li
              %a{ href: '/book/service' } Service
            %li
              %a{ href: '/book/event' } Event
        %li
          %a{ href: '/finance' } Finance

      %ul{ class: 'nav navbar-nav navbar-right' }
        %form{ class: 'navbar-form navbar-left', role: 'search' }
          .form-group
            %input{ type: 'text', class: 'form-control', placeholder: 'Search' }
            %button{ type: 'submit', class: 'btn btn-default' } Go

        - if @user.null?
          %li
            %a{ href: '#', 'data-toggle' => 'modal', 'data-target' => '#loginSignup' } Login/Sign up
        - else
          %li
            %a{ href: '/profile' }= @user.name
          %li
            %a{ href: '/logout' } Logout

%div{ class: 'modal fade', id: 'loginSignup', tabindex: '-1', role: 'dialog', 'aria-labelledby' => 'LoginSignup', 'aria-hidden' => 'true' }
  .modal-dialog
    .modal-content
      .modal-header
        %button{ type: 'button', class: 'close', 'data-dismiss' => 'modal' }
          %span{ 'aria-hidden' => 'true' } &times;
          %span.sr-only Close
        %h4.modal-title Login/Sign up
      .modal-body
        .row
          .col-md-6
            %h4 Login
            %br

            = form_tag '/sessions/create' do
              = field_set_tag do
                .form-group
                  = label_tag :email, for: 'email'
                  = email_field_tag :email, class: 'form-control', placeholder: 'Enter email'
                .form-group
                  = label_tag :password, for: 'password'
                  = password_field_tag :password, class: 'form-control', placeholder: 'Enter password'
              = field_set_tag( class: 'buttons' ) do
                = submit_tag "Login", class: 'btn btn-primary'
              %a{ href: '/forgot-password' } Forgot password?

          %hr

          .col-md-6
            %h4 Sign up
            %br
            %form
              .form-group
                %label{ for: 'email' } Email
                %input{ type: 'email', class: 'form-control', placeholder: 'Enter email'}
              .form-group
                %label{ for: 'password' } Password
                %input{ type: 'password', class: 'form-control', placeholder: 'Enter password'}
              .form-group
                %label{ for: 'password' } Confirm password
                %input{ type: 'password', class: 'form-control', placeholder: 'Confirm password'}
              .checkbox
                %label
                  %input{ type: 'checkbox' } I agree to Audi's <a href="/privacy">privacy policy <i><small>(no spam)</small></i></a>
              .checkbox
                %label
                  %input{ type: 'checkbox' } I'm happy to receive emails from Audi
            %a{ href: '/signup', class: 'btn btn-primary' } Sign up

      .modal-footer
        %button{ type: 'button', class: 'btn btn-default', 'data-dismiss' => 'modal' } Close